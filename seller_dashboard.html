<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seller Dashboard - VendorHive</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f5f6fab9;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .wrapper {
      flex: 1;
      display: flex;
      flex-direction: row;
    }
    .sidebar {
      width: 230px;
      background: #1e272e;
      color: white;
      min-height: 100vh;
      padding: 1.5rem 1rem;
      position: fixed;
    }
    .sidebar h2 {
      font-size: 20px;
      margin-bottom: 1rem;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar ul li {
      margin: 1rem 0;
      font-weight: 500;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 6px;
    }
    .sidebar ul li:hover {
      background: #485460;
    }
    .navbar {
     position: fixed;
      left: 230px;
      right: 0;
      top: 0;
      height: 60px;
      background: rgba(255, 255, 255, 0.838);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      z-index: 1000;
    }
    .main-content {
      flex: 1;
      margin-left: 230px;
      margin-top: 60px;
      padding: 2rem;
      width: calc(100% - 230px);
    }

    .section { display: none; }
    .section.active { display: block; }

    .tabbed-section .tab-header {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .tabbed-section .tab-header div {
      padding: 0.5rem 1rem;
      background: #d6dbde;
      border-radius: 6px;
      cursor: pointer;
    }

    .tabbed-section .tab-header .active {
      background: #0984e3;
      color: rgba(255, 255, 255, 0.797);
    }

    /* OVERVIEW SECTION STYLES */
    .overview-grid {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .overview-card {
      flex: 1 1 300px;
      background: rgba(255, 255, 255, 0.747);
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }

    .overview-card h3 {
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .overview-card .stock-alert {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff8e1ea;
      padding: 0.5rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .overview-card .stock-alert img {
      width: 40px;
      height: 40px;
      object-fit: cover;
      border-radius: 4px;
      margin-right: 10px;
    }

    .overview-card .stock-alert .details {
      flex: 1;
      margin-left: 10px;
    }

    .overview-card .order-entry {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.8rem;
    }

    .overview-card .order-entry .info {
      flex: 1;
    }

    .overview-card .order-entry small {
      display: block;
      color: gray;
    }

    .overview-card button {
      background: #e74c3c;
      border: none;
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
    }

    .overview-card .success {
      color: green;
    }

    .overview-card .pending {
      color: #f1c40f;
    }

    .overview-card .shipped {
      color: #2980b9;
    }

        .section { display: none; }
    .section.active { display: block; }

    form input, form textarea {
      width: 100%;
      max-width: 450px;
      padding: 0.7rem;
      margin: 0.5rem 0 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    form button {
      padding: 0.6rem 1.2rem;
      background: #0984e3;
      border: none;
      border-radius: 6px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    .product-form {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      margin-bottom: 2rem;
    }

    #productList {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .card {
      background: rgba(255, 255, 255, 0.858);
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
    }

    .card img {
      width: 50%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
    }

    .card button {
      margin: 5px;
      padding: 0.4rem 0.8rem;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }

    .edit-btn {
      background: #28a745;
      color: white;
    }

    .delete-btn {
      background: #dc3545;
      color: white;
    }

     .analytics-grid {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      margin-top: 2rem;
    }

    .stat-card {
      flex: 1 1 280px;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
      text-align: center;
    }

    .stat-card h3 {
      color: #333;
      margin-bottom: 0.5rem;
    }

    .stat-card p {
      font-size: 1.8rem;
      font-weight: bold;
      color: #0984e3;
    }

    .footer {
      background-color: #1e293b;
      color: #f1f5f9;
      padding: 50px 20px 20px;
      font-size: 14px;
      margin-top: auto;
    }

    .footer-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 32px;
  max-width: 1200px;
  margin: 0 auto 30px;
  padding: 0 10px;
}
.footer-col {
  flex: 1 1 220px;
  min-width: 180px;
}
    .footer h4 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #fbbf24;
    }

    .footer ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer ul li {
      margin-bottom: 10px;
      word-wrap: break-word;
       transition: color 0.3s ease;
    }

    .footer ul li a {
      text-decoration: none;
      color: #cbd5e1;
      transition: color 0.3s ease;
    }

    .footer ul li a:hover {
      color: #ffffff;
    }

    .footer hr {
      border: 0;
      border-top: 1px solid #334155;
      margin-bottom: 20px;
    }

    .footer-bottom {
      text-align: center;
      color: #94a3b8;
        padding: 10px;
    }

    .footer-bottom .heart {
      color: #f43f5e;
    }

    @media (max-width: 600px) {
  .footer-col {
    flex: 1 1 100%;
  }
}

  </style>
</head>
<body>
  <div class="wrapper">
    <aside class="sidebar">
      <h2>üì¶ Seller Panel</h2>
      <ul>
        <li onclick="navigate('overview')">Overview</li>
        <li onclick="navigate('products')">Products</li>
        <li onclick="navigate('orders')">Orders</li>
        <li onclick="navigate('analytics')">Analytics</li>
        <li onclick="navigate('settings')">Account Settings</li>
        <li onclick="logout()">Logout</li>
      </ul>
    </aside>

    <header class="navbar">
      <div><strong>üõçÔ∏è Seller Dashboard</strong></div>
      <div id="userName">Welcome, Seller</div>
    </header>

    <main class="main-content">
      <section id="overviewSection" class="section active">
        <h2>üìä Overview</h2>
        <div class="overview-grid">
          <div class="overview-card" id="lowStockCard">
            <h3>‚ö†Ô∏è Low Stock Alerts</h3>
            <div id="stockAlerts">Loading...</div>
          </div>

          <div class="overview-card" id="recentOrdersCard">
            <h3>üßæ Recent Orders</h3>
            <div id="recentOrders">Loading...</div>
          </div>
        </div>
      </section>
      <!-- Products Section -->
      <section id="productsSection" class="section">
        <h2>üõí Product Management</h2>
        <div class="product-form">
          <h3 id="formTitle">Add Product</h3>
          <form id="productForm">
            <input type="hidden" id="editId" />
            <input type="text" id="title" placeholder="Product Title" required />
            <textarea id="description" placeholder="Description" required></textarea>
            <input type="number" id="price" placeholder="Price" required />
            <input type="text" id="category" placeholder="Category" required />
            <input type="number" id="discount" placeholder="Discount (%)" />
            <input type="number" id="stock" placeholder="Stock Quantity" required />
            <input type="file" id="productImageInput" accept="image/*" />
            <button type="button" onclick="uploadToCloudinary()">Upload Image</button>
            <input type="text" id="imageURL" placeholder="Image URL" readonly />
            <img id="imgPreview" style="width: 100px; margin-top: 10px;" />
            <button type="submit" id="submitBtn">Add Product</button>
          </form>
        </div>
        <div id="productList"></div>
      </section>

      <!-- Orders Section -->
      <section id="ordersSection" class="section">
        <h2>üì¶ Manage Orders</h2>
        <div id="orderList"></div>
      </section>

      <!-- Analytics Section -->
      <section id="analyticsSection" class="section">
        <h2>üìà Sales Analytics</h2>
        <div class="analytics-grid">
          <div class="stat-card"><h3>Total Orders</h3><p id="totalOrders">0</p></div>
          <div class="stat-card"><h3>Total Revenue</h3><p id="totalRevenue">‚Çπ0</p></div>
          <div class="stat-card"><h3>Average Order</h3><p id="avgOrder">‚Çπ0</p></div>
        </div>
      </section>

      <!-- Settings Section -->
      <section id="settingsSection" class="section">
        <h2>‚öôÔ∏è Account Settings</h2>
        <form id="settingsForm">
          <label>Seller Name: <input type="text" id="sellerName" /></label>
          <label>Email: <input type="email" id="email" /></label>
          <label>Shop Description: <textarea id="shopDesc"></textarea></label>
          <button type="submit">Save</button>
        </form>
      </section>
    </main>
  </div>

  <!-- ‚úÖ Footer -->
  <footer class="footer">
    <div class="footer-grid">
      <div class="footer-col">
        <h4>For Customers</h4>
        <ul>
          <li><a href="#">How to Shop</a></li>
          <li><a href="#">Customer Support</a></li>
          <li><a href="#">Return Policy</a></li>
          <li><a href="#">Safety & Security</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>For Businesses</h4>
        <ul>
          <li><a href="#">Sell on VendorHive</a></li>
          <li><a href="#">Business Resources</a></li>
          <li><a href="#">Pricing Plans</a></li>
          <li><a href="#">Success Stories</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Company</h4>
        <ul>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Careers</a></li>
          <li><a href="#">Press</a></li>
          <li><a href="#">Community Impact</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Support</h4>
        <ul>
          <li><a href="#">Help Center</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="#">Terms of Service</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
    <hr />
    <div class="footer-bottom">
      ¬© 2025 VendorHive. All rights reserved. Built with <span class="heart">‚ù§Ô∏è</span> for local communities.
    </div>
  </footer>
<!-- Firebase & Logic Scripts -->
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDyZt2GkKP-xZu1fnGfStPyWLvM5oWjm9Q",
    authDomain: "ecommerce-396a5.firebaseapp.com",
    databaseURL: "https://ecommerce-396a5-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "ecommerce-396a5",
    storageBucket: "ecommerce-396a5.appspot.com",
    messagingSenderId: "292220509400",
    appId: "1:292220509400:web:50a603a5f82f3402784bad"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // üîÅ NAVIGATION BETWEEN SECTIONS
  function navigate(section) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(section + 'Section').classList.add('active');
  }

  // ‚òÅÔ∏è CLOUDINARY UPLOAD
  function uploadToCloudinary() {
    const file = document.getElementById("productImageInput").files[0];
    if (!file) return alert("Choose an image first.");
    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", "product_images");
    const cloudName = "dwlahv9mv";
    fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
      method: "POST",
      body: formData
    })
    .then(res => res.json())
    .then(data => {
      imageURL.value = data.secure_url;
      imgPreview.src = data.secure_url;
      alert("‚úÖ Image uploaded!");
    })
    .catch(() => alert("‚ùå Upload failed!"));
  }

  // üì• ADD OR UPDATE PRODUCT
  productForm.addEventListener("submit", async e => {
    e.preventDefault();
    const id = editId.value;
    const product = {
      title: title.value,
      description: description.value,
      price: parseFloat(price.value),
      category: category.value,
      discount: parseFloat(discount.value) || 0,
      stock: parseInt(stock.value),
      imageURL: imageURL.value,
      rating: 0
    };
    if (id) {
      await db.ref(`products/${id}`).update(product);
      submitBtn.textContent = "Add Product";
      formTitle.textContent = "Add Product";
    } else {
      await db.ref("products").push(product);
    }
    productForm.reset();
    imgPreview.src = "";
    imageURL.value = "";
    editId.value = "";
  });

  // üîÑ LOAD PRODUCTS
  db.ref("products").on("value", snapshot => {
    productList.innerHTML = "";
    const data = snapshot.val();
    for (let id in data) {
      const p = data[id];
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <img src="${p.imageURL}" />
        <h3>${p.title}</h3>
        <p>${p.description}</p>
        <p>‚Çπ${p.price} | ${p.category}</p>
        <p>Discount: ${p.discount}%</p>
        <p><strong>Stock:</strong> ${p.stock || 0}</p>
        <button class="edit-btn" onclick="editProduct('${id}')">Edit</button>
        <button class="delete-btn" onclick="deleteProduct('${id}')">Delete</button>
      `;
      productList.appendChild(card);
    }
  });

  // ‚úèÔ∏è EDIT PRODUCT
  function editProduct(id) {
    db.ref(`products/${id}`).once("value", snap => {
      const p = snap.val();
      title.value = p.title;
      description.value = p.description;
      price.value = p.price;
      category.value = p.category;
      discount.value = p.discount;
      stock.value = p.stock;
      imageURL.value = p.imageURL;
      imgPreview.src = p.imageURL;
      editId.value = id;
      submitBtn.textContent = "Update Product";
      formTitle.textContent = "Edit Product";
    });
  }

  // üóëÔ∏è DELETE PRODUCT
  function deleteProduct(id) {
    if (confirm("Delete this product?")) {
      db.ref(`products/${id}`).remove();
    }
  }

  // üì¶ LOAD ORDERS
  function loadOrders() {
    db.ref("orders").on("value", snap => {
      const orders = snap.val();
      orderList.innerHTML = "";
      for (let id in orders) {
        const o = orders[id];
        const card = document.createElement("div");
        card.className = "order-card";
        card.innerHTML = `
          <p><strong>Customer:</strong> ${o.customer}</p>
          <p><strong>Product:</strong> ${o.product}</p>
          <p><strong>Quantity:</strong> ${o.quantity || 1}</p>
          <p><strong>Total:</strong> ‚Çπ${o.totalAmount}</p>
          <p>
            <strong>Status:</strong>
            <select class="status-select" onchange="updateStatus('${id}', this.value)">
              <option value="Pending" ${o.status === "Pending" ? "selected" : ""}>Pending</option>
              <option value="Shipped" ${o.status === "Shipped" ? "selected" : ""}>Shipped</option>
              <option value="Delivered" ${o.status === "Delivered" ? "selected" : ""}>Delivered</option>
            </select>
          </p>
        `;
        orderList.appendChild(card);
      }
    });
  }

  // üìù UPDATE ORDER STATUS
  function updateStatus(id, status) {
    db.ref(`orders/${id}/status`).set(status);
  }

  // ‚öôÔ∏è LOAD SETTINGS
  function loadSettings() {
    db.ref("settings").once("value", snap => {
      const s = snap.val() || {};
      sellerName.value = s.sellerName || "";
      email.value = s.email || "";
      shopDesc.value = s.shopDesc || "";
    });
  }

  settingsForm.addEventListener("submit", e => {
    e.preventDefault();
    const settings = {
      sellerName: sellerName.value,
      email: email.value,
      shopDesc: shopDesc.value
    };
    db.ref("settings").set(settings);
    alert("‚úÖ Settings saved!");
  });

  // üìä LOAD ANALYTICS
  function loadAnalytics() {
    db.ref("orders").on("value", snapshot => {
      const orders = snapshot.val() || {};
      let total = 0;
      let count = 0;
      for (let id in orders) {
        const order = orders[id];
        if (order.totalAmount) {
          total += parseFloat(order.totalAmount);
          count++;
        }
      }
      document.getElementById("totalOrders").textContent = count;
      document.getElementById("totalRevenue").textContent = `‚Çπ${total.toFixed(2)}`;
      document.getElementById("avgOrder").textContent = count ? `‚Çπ${(total / count).toFixed(2)}` : "‚Çπ0";
    });
  }

  // üö® LOAD STOCK ALERTS
  function loadStockAlerts() {
    db.ref("products").once("value", snapshot => {
      const products = snapshot.val() || {};
      const alertContainer = document.getElementById("stockAlerts");
      alertContainer.innerHTML = "";

      for (let id in products) {
        const p = products[id];
        if (p.stock <= 5) {
          const alert = document.createElement("div");
          alert.className = "stock-alert";
          alert.innerHTML = `
            <div class="details">
              <strong>${p.title}</strong>
              <div>Only ${p.stock} left in stock</div>
            </div>
            <img src="${p.imageURL}" />
          `;
          alertContainer.appendChild(alert);
        }
      }

      if (!alertContainer.innerHTML) {
        alertContainer.innerHTML = "<p>No stock alerts üì¶</p>";
      }
    });
  }

  // üìú RECENT ORDERS IN OVERVIEW
  function loadRecentOrders() {
    db.ref("orders").once("value", snap => {
      const orders = snap.val() || {};
      const recentOrdersDiv = document.getElementById("recentOrders");
      const entries = Object.entries(orders).slice(-5).reverse();

      recentOrdersDiv.innerHTML = "";
      for (let [id, order] of entries) {
        const item = document.createElement("div");
        item.className = "order-entry";
        item.innerHTML = `
          <div class="info">
            <strong>${order.product}</strong>
            <small>Qty: ${order.quantity || 1}</small>
          </div>
          <span class="${order.status.toLowerCase()}">${order.status}</span>
        `;
        recentOrdersDiv.appendChild(item);
      }

      if (entries.length === 0) {
        recentOrdersDiv.innerHTML = "<p>No recent orders üì≠</p>";
      }
    });
  }

  function logout() {
    if (confirm("Logout?")) {
      window.location.href = "/index.html";
    }
  }

  // ‚úÖ ON PAGE LOAD
  document.addEventListener("DOMContentLoaded", () => {
    loadOrders();
    loadSettings();
    loadAnalytics();
    loadStockAlerts();
    loadRecentOrders();
  });
</script>
